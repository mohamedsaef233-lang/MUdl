<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedBuild3D - التطبيق الرئيسي</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/loaders/OBJLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    <!-- Stripe.js for payment processing -->
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        /* جميع الأنماط السابقة + إضافات جديدة */
        
        /* أنماط بوابات الدفع */
        .payment-section {
            background: #f8fafc;
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 25px;
        }
        
        .subscription-plans {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .plan-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            border: 2px solid #e2e8f0;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .plan-card:hover {
            border-color: var(--medical-blue);
            transform: translateY(-5px);
        }
        
        .plan-card.selected {
            border-color: var(--medical-blue);
            background: #f0f7ff;
        }
        
        .plan-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .plan-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--medical-blue);
            margin-bottom: 15px;
        }
        
        .plan-features {
            list-style: none;
            margin-bottom: 20px;
        }
        
        .plan-features li {
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .stripe-form {
            background: white;
            padding: 25px;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
        }
        
        .card-element {
            padding: 15px;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .pay-button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #6772e5, #5469d4);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .pay-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(103, 114, 229, 0.3);
        }
        
        /* أنماط محرر 3D المحسن */
        .workshop-advanced {
            background: white;
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 25px;
        }
        
        .file-upload {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            margin-bottom: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .file-upload:hover {
            border-color: var(--medical-blue);
            background: #f0f7ff;
        }
        
        .file-upload i {
            font-size: 3rem;
            color: var(--medical-blue);
            margin-bottom: 15px;
        }
        
        .model-controls-advanced {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .advanced-control {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }
        
        .control-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--medical-blue);
            margin: 10px 0;
        }
        
        .control-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        /* أنماط الأسئلة المحسنة */
        .quiz-advanced {
            background: white;
            padding: 25px;
            border-radius: 16px;
            margin-bottom: 25px;
        }
        
        .score-display {
            background: linear-gradient(135deg, var(--medical-teal), #006064);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--medical-teal), #006064);
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- الهيكل الأساسي للتطبيق -->
    <div class="app-container active-page" id="main-page">
        <!-- Header -->
        <header class="app-header">
            <a href="#" class="settings-btn" id="settings-btn">
                <i class="fas fa-ellipsis-v"></i>
            </a>
            
            <div class="logo">
                <i class="fas fa-stethoscope"></i>
            </div>
            <h1 class="app-title">MedBuild3D</h1>
            <div class="developer-name">Saad Zaki Ibrahim</div>
            <p class="app-subtitle">تفكيك الأجهزة الطبية</p>
        </header>
        
        <!-- المحتوى الرئيسي -->
        <main class="main-content">
            <div class="features-grid">
                <div class="feature-card theory" id="theory-btn">
                    <div class="feature-icon">
                        <i class="fas fa-book-medical"></i>
                    </div>
                    <div class="feature-content">
                        <h2 class="feature-title">النظري</h2>
                        <p class="feature-description">شروحات الأجهزة الطبية</p>
                    </div>
                    <div class="feature-arrow">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
                
                <div class="feature-card practice" id="practice-btn">
                    <div class="feature-icon">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="feature-content">
                        <h2 class="feature-title">العملي</h2>
                        <p class="feature-description">تدريب تفكيك وتجميع</p>
                    </div>
                    <div class="feature-arrow">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
                
                <div class="feature-card tests" id="tests-btn">
                    <div class="feature-icon">
                        <i class="fas fa-star-of-life"></i>
                    </div>
                    <div class="feature-content">
                        <h2 class="feature-title">الاختبارات</h2>
                        <p class="feature-description">أسئلة وتقييم المستوى</p>
                    </div>
                    <div class="feature-arrow">
                        <i class="fas fa-chevron-left"></i>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="app-footer">
            <div class="copyright">جميع الحقوق محفوظة لدى MedBuild3D</div>
            <div class="year">© 2026</div>
        </footer>
    </div>

    <!-- صفحة الشرح النظري -->
    <div class="app-container" id="theory-page">
        <!-- محتوى الشرح النظري الكامل -->
    </div>

    <!-- صفحة الورشة العملية المتقدمة -->
    <div class="app-container" id="workshop-page">
        <div class="workshop-container">
            <div class="workshop-header">
                <h2 class="workshop-title">ورشة العمل المتقدمة</h2>
                <p class="workshop-subtitle">تحميل وتفكيك النماذج ثلاثية الأبعاد</p>
            </div>
            
            <!-- محرر 3D المتقدم -->
            <div class="workshop-advanced">
                <!-- رفع الملف -->
                <div class="file-upload" id="file-upload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>اسحب وأفلت ملف OBJ هنا</h3>
                    <p>أو انقر لاختيار الملف</p>
                    <input type="file" id="obj-file" accept=".obj" style="display: none;">
                </div>
                
                <!-- مساحة العرض -->
                <div id="model-container">
                    <div class="model-loading">
                        <i class="fas fa-cube"></i>
                        <p>جاري تحميل النموذج ثلاثي الأبعاد...</p>
                    </div>
                </div>
                
                <!-- أدوات التحكم المتقدمة -->
                <div class="model-controls-advanced">
                    <div class="advanced-control">
                        <i class="fas fa-arrows-alt"></i>
                        <div class="control-title">الموقع</div>
                        <div class="control-value" id="position-value">X: 0, Y: 0, Z: 0</div>
                        <input type="range" class="control-slider" id="position-slider" min="-10" max="10" step="0.1" value="0">
                    </div>
                    
                    <div class="advanced-control">
                        <i class="fas fa-sync-alt"></i>
                        <div class="control-title">الدوران</div>
                        <div class="control-value" id="rotation-value">X: 0°, Y: 0°, Z: 0°</div>
                        <input type="range" class="control-slider" id="rotation-slider" min="0" max="360" step="1" value="0">
                    </div>
                    
                    <div class="advanced-control">
                        <i class="fas fa-expand-alt"></i>
                        <div class="control-title">المقياس</div>
                        <div class="control-value" id="scale-value">1.0x</div>
                        <input type="range" class="control-slider" id="scale-slider" min="0.1" max="3" step="0.1" value="1">
                    </div>
                </div>
                
                <!-- أدوات التفكيك -->
                <div class="workshop-controls">
                    <button class="control-btn assemble-btn" id="assemble-btn">
                        <i class="fas fa-puzzle-piece"></i>
                        تجميع الجهاز
                    </button>
                    <button class="control-btn disassemble-btn" id="disassemble-btn">
                        <i class="fas fa-cogs"></i>
                        تفكيك الجهاز
                    </button>
                    <button class="control-btn reset-btn" id="reset-btn">
                        <i class="fas fa-redo"></i>
                        إعادة التعيين
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة الاختبارات المتقدمة -->
    <div class="app-container" id="quiz-page">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2 class="quiz-title">الاختبارات المتقدمة</h2>
                <p class="quiz-subtitle">اختبر معلوماتك حول الأجهزة الطبية</p>
                
                <!-- عرض النتيجة -->
                <div class="score-display">
                    <div class="score-value" id="current-score">0%</div>
                    <div>نتيجتك الحالية</div>
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="quiz-progress" style="width: 0%"></div>
                </div>
                
                <div class="question-counter">السؤال 1 من 30</div>
            </div>
            
            <!-- محتوى الأسئلة -->
            <div class="question-container">
                <div class="question-text" id="question-text">
                    <!-- سيتم تعبئة السؤال ديناميكياً -->
                </div>
                
                <div class="options-container" id="options-container">
                    <!-- سيتم تعبئة الخيارات ديناميكياً -->
                </div>
            </div>
            
            <!-- مساعدات متقدمة -->
            <div class="lifelines-container">
                <div class="lifeline" id="fifty-fifty">
                    <i class="fas fa-user-friends"></i>
                    حذف إجابتين
                </div>
                <div class="lifeline" id="ask-audience">
                    <i class="fas fa-users"></i>
                    سؤال الجمهور
                </div>
                <div class="lifeline" id="phone-friend">
                    <i class="fas fa-phone-alt"></i>
                    اتصال بصديق
                </div>
                <div class="lifeline" id="change-question">
                    <i class="fas fa-sync-alt"></i>
                    تغيير السؤال
                </div>
            </div>
        </div>
    </div>

    <!-- صفحة الإعدادات مع الدفع -->
    <div class="app-container" id="settings-page">
        <div class="settings-container">
            <div class="settings-header">
                <a href="#" class="back-btn" id="settings-back-btn">
                    <i class="fas fa-arrow-right"></i>
                </a>
                <h2 class="settings-title">الإعدادات والدفع</h2>
                <p class="settings-subtitle">إدارة حسابك واشتراكاتك</p>
            </div>
            
            <!-- معلومات الحساب -->
            <div class="account-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-name" id="settings-username">مستخدم MedBuild3D</div>
                <div class="user-email" id="settings-email">user@medbuild3d.com</div>
                <div class="subscription-status" id="subscription-status">
                    <span class="status-free">النسخة المجانية</span>
                </div>
            </div>
            
            <!-- قسم الاشتراكات -->
            <div class="payment-section">
                <div class="section-title">
                    <i class="fas fa-crown"></i>
                    <span>خطط الاشتراك</span>
                </div>
                
                <div class="subscription-plans">
                    <div class="plan-card" data-plan="basic">
                        <div class="plan-name">النسخة الأساسية</div>
                        <div class="plan-price">مجاني</div>
                        <ul class="plan-features">
                            <li>الوصول إلى 5 أجهزة</li>
                            <li>10 اختبارات شهرية</li>
                            <li>دعم أساسي</li>
                        </ul>
                        <button class="plan-select-btn" data-plan="basic">مفعل حالياً</button>
                    </div>
                    
                    <div class="plan-card" data-plan="pro">
                        <div class="plan-name">النسخة الاحترافية</div>
                        <div class="plan-price">$9.99/شهر</div>
                        <ul class="plan-features">
                            <li>الوصول إلى جميع الأجهزة</li>
                            <li>اختبارات غير محدودة</li>
                            <li>نماذج 3D متقدمة</li>
                            <li>دعم فني متميز</li>
                        </ul>
                        <button class="plan-select-btn" data-plan="pro">اختيار الخطة</button>
                    </div>
                    
                    <div class="plan-card" data-plan="enterprise">
                        <div class="plan-name">النسخة المؤسسية</div>
                        <div class="plan-price">$29.99/شهر</div>
                        <ul class="plan-features">
                            <li>جميع ميزات Pro</li>
                            <li>إدارة متعددة المستخدمين</li>
                            <li>تقارير متقدمة</li>
                            <li>دعم على مدار الساعة</li>
                        </ul>
                        <button class="plan-select-btn" data-plan="enterprise">اختيار الخطة</button>
                    </div>
                </div>
                
                <!-- نموذج الدفع -->
                <div class="stripe-form" id="payment-form" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">معلومات البطاقة</label>
                        <div class="card-element" id="card-element">
                            <!-- سيتم إضافة عناصر Stripe هنا -->
                        </div>
                        <div id="card-errors" class="error-message"></div>
                    </div>
                    
                    <button class="pay-button" id="submit-payment">
                        <i class="fas fa-lock"></i>
                        ادفع الآن
                    </button>
                </div>
            </div>
            
            <!-- باقي إعدادات التطبيق -->
        </div>
    </div>

    <script>
        // الكود JavaScript الكامل
        // يتضمن:
        // 1. إدارة حالة المستخدم
        // 2. نظام تحميل ملفات OBJ
        // 3. محرر 3D متقدم
        // 4. نظام اختبارات متكامل
        // 5. تكامل Stripe للدفع
        // 6. جميع الأسئلة والشرح النظري
        
        // تهيئة Stripe
        const stripe = Stripe('pk_test_your_publishable_key_here'); // استبدل بمفتاحك الحقيقي
        const elements = stripe.elements();
        const cardElement = elements.create('card', {
            style: {
                base: {
                    fontSize: '16px',
                    color: '#424770',
                    '::placeholder': {
                        color: '#aab7c4',
                    },
                },
            },
        });
        
        // سأواصل الكود في الرد التالي بسبب حدود الطول...
    </script>
</body>
</html>